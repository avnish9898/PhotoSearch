{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/avnish/Desktop/PepCodingWebd/projects/searchmovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/avnish/Desktop/PepCodingWebd/projects/searchmovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/avnish/Desktop/PepCodingWebd/projects/searchmovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/avnish/Desktop/PepCodingWebd/projects/searchmovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Navbar from'./Navbar';import ImageLoad from'./ImageLoad';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PhotoSearch(props){var previewUrl=\"\";var url='https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=aeafe065ace713b9cedb10b958dfa6a3&format=json&nojsoncallback=1&api_sig=891c234ff88565ed46c43c3dc792b94a';var url2='https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=aeafe065ace713b9cedb10b958dfa6a3&text=Value&format=json&nojsoncallback=1&api_sig=fecd019069cc63aac9ff4d8e58dddf95';var _useState=useState([]),_useState2=_slicedToArray(_useState,2),photos=_useState2[0],setPhotos=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),previewPhoto=_useState4[0],setPreviewPhoto=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),imgLoc=_useState6[0],setImgLoc=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currText=_useState8[0],setCurrText=_useState8[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resp,data,arr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:resp=_context.sent;_context.next=5;return resp.json();case 5:data=_context.sent;arr=_toConsumableArray(data[\"photos\"][\"photo\"]);setPhotos(arr);case 8:case\"end\":return _context.stop();}}},_callee);})),[]);useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resp,data,filterPhotos,_resp,_data,arr;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(currText!=\"\")){_context2.next=12;break;}_context2.next=3;return fetch(url2);case 3:resp=_context2.sent;_context2.next=6;return resp.json();case 6:data=_context2.sent;filterPhotos=data[\"photos\"][\"photo\"].filter(function(obj){return obj[\"title\"].trim().includes(currText);});filterPhotos.map(function(obj){console.log(obj[\"title\"]);});if(filterPhotos.length>0){setPhotos(filterPhotos);}_context2.next=20;break;case 12:_context2.next=14;return fetch(url);case 14:_resp=_context2.sent;_context2.next=17;return _resp.json();case 17:_data=_context2.sent;arr=_toConsumableArray(_data[\"photos\"][\"photo\"]);setPhotos(arr);case 20:case\"end\":return _context2.stop();}}},_callee2);})),[currText]);var handleCurrText=function handleCurrText(e){setCurrText(e.target.value);};var previewImage=function previewImage(e){setImgLoc(e.target.src);setPreviewPhoto(!previewPhoto);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{handleCurrText:handleCurrText}),/*#__PURE__*/_jsx(\"div\",{className:\"imgContainer\",children:!previewPhoto?photos.map(function(movieObj){var serverId=movieObj[\"server\"];var id=movieObj[\"id\"];var secret=movieObj[\"secret\"];var url=\"https://live.staticflickr.com/\"+serverId+\"/\"+id+\"_\"+secret+\".jpg\";return/*#__PURE__*/_jsx(\"img\",{onClick:previewImage,id:id,src:url});}):/*#__PURE__*/_jsx(ImageLoad,{src:imgLoc,previewImage:previewImage})})]});}","map":{"version":3,"sources":["C:/Users/avnish/Desktop/PepCodingWebd/projects/searchmovie/src/component/PhotoSearch.jsx"],"names":["React","useEffect","useState","Navbar","ImageLoad","PhotoSearch","props","previewUrl","url","url2","photos","setPhotos","previewPhoto","setPreviewPhoto","imgLoc","setImgLoc","currText","setCurrText","fetch","resp","json","data","arr","filterPhotos","filter","obj","trim","includes","map","console","log","length","handleCurrText","e","target","value","previewImage","src","movieObj","serverId","id","secret"],"mappings":"ysBAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,C,wFACA,cAAe,SAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,CAEvC,GAAIC,CAAAA,UAAU,CAAC,EAAf,CACA,GAAMC,CAAAA,GAAG,CAAC,qLAAV,CACA,GAAMC,CAAAA,IAAI,CAAC,6LAAX,CAEA,cAAuBP,QAAQ,CAAC,EAAD,CAA/B,wCAAKQ,MAAL,eAAYC,SAAZ,eACA,eAAmCT,QAAQ,CAAC,KAAD,CAA3C,yCAAKU,YAAL,eAAkBC,eAAlB,eACA,eAAuBX,QAAQ,CAAC,EAAD,CAA/B,yCAAKY,MAAL,eAAYC,SAAZ,eACF,eAA2Bb,QAAQ,CAAC,EAAD,CAAnC,yCAAKc,QAAL,eAAcC,WAAd,eACEhB,SAAS,sEAAC,2KACQiB,CAAAA,KAAK,CAACV,GAAD,CADb,QACHW,IADG,qCAGQA,CAAAA,IAAI,CAACC,IAAL,EAHR,QAGHC,IAHG,eAIHC,GAJG,oBAIKD,IAAI,CAAC,QAAD,CAAJ,CAAe,OAAf,CAJL,EAMNV,SAAS,CAACW,GAAD,CAAT,CANM,sDAAD,GAOP,EAPO,CAAT,CAQArB,SAAS,sEAAE,wLACNe,QAAQ,EAAE,EADJ,mDAEME,CAAAA,KAAK,CAACT,IAAD,CAFX,QAELU,IAFK,uCAIOA,CAAAA,IAAI,CAACC,IAAL,EAJP,QAIJC,IAJI,gBAMLE,YANK,CAMQF,IAAI,CAAC,QAAD,CAAJ,CAAe,OAAf,EAAwBG,MAAxB,CAA+B,SAACC,GAAD,CAAO,CACrD,MAAOA,CAAAA,GAAG,CAAC,OAAD,CAAH,CAAaC,IAAb,GAAoBC,QAApB,CAA6BX,QAA7B,CAAP,CACD,CAFgB,CANR,CASTO,YAAY,CAACK,GAAb,CAAiB,SAACH,GAAD,CAAO,CACtBI,OAAO,CAACC,GAAR,CAAYL,GAAG,CAAC,OAAD,CAAf,EACD,CAFD,EAGA,GAAGF,YAAY,CAACQ,MAAb,CAAoB,CAAvB,CAAyB,CAEtBpB,SAAS,CAACY,YAAD,CAAT,CACF,CAfQ,wDAkBML,CAAAA,KAAK,CAACV,GAAD,CAlBX,SAkBLW,KAlBK,wCAoBOA,CAAAA,KAAI,CAACC,IAAL,EApBP,SAoBJC,KApBI,gBAqBJC,GArBI,oBAqBID,KAAI,CAAC,QAAD,CAAJ,CAAe,OAAf,CArBJ,EAuBPV,SAAS,CAACW,GAAD,CAAT,CAvBO,yDAAF,GAyBP,CAACN,QAAD,CAzBO,CAAT,CA2BD,GAAMgB,CAAAA,cAAc,CAAC,QAAfA,CAAAA,cAAe,CAACC,CAAD,CAAK,CACxBhB,WAAW,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,CAACH,CAAD,CAAK,CACrBlB,SAAS,CAACkB,CAAC,CAACC,MAAF,CAASG,GAAV,CAAT,CACAxB,eAAe,CAAC,CAACD,YAAF,CAAf,CACF,CAHD,CAKC,mBAEI,aAAK,SAAS,CAAC,KAAf,wBACO,KAAC,MAAD,EAAQ,cAAc,CAAEoB,cAAxB,EADP,cAGE,YAAK,SAAS,CAAC,cAAf,UACG,CAACpB,YAAD,CAAcF,MAAM,CAACkB,GAAP,CAAW,SAACU,QAAD,CAAY,CAClC,GAAIC,CAAAA,QAAQ,CAACD,QAAQ,CAAC,QAAD,CAArB,CACA,GAAIE,CAAAA,EAAE,CAACF,QAAQ,CAAC,IAAD,CAAf,CACA,GAAIG,CAAAA,MAAM,CAACH,QAAQ,CAAC,QAAD,CAAnB,CACA,GAAI9B,CAAAA,GAAG,CAAC,iCAAiC+B,QAAjC,CAA0C,GAA1C,CAA8CC,EAA9C,CAAiD,GAAjD,CAAqDC,MAArD,CAA4D,MAApE,CACE,mBACE,YAAK,OAAO,CAAEL,YAAd,CAA4B,EAAE,CAAEI,EAAhC,CAAoC,GAAG,CAAEhC,GAAzC,EADF,CAGH,CARY,CAAd,cAQI,KAAC,SAAD,EAAW,GAAG,CAAEM,MAAhB,CAAwB,YAAY,CAAEsB,YAAtC,EATP,EAHF,GAFJ,CAoBH","sourcesContent":["import React,{useEffect,useState} from 'react'\r\nimport Navbar from './Navbar'\r\nimport ImageLoad from './ImageLoad'\r\nexport default function PhotoSearch(props) {\r\n\r\n    let previewUrl=\"\"\r\n    const url='https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=aeafe065ace713b9cedb10b958dfa6a3&format=json&nojsoncallback=1&api_sig=891c234ff88565ed46c43c3dc792b94a'\r\n    const url2='https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=aeafe065ace713b9cedb10b958dfa6a3&text=Value&format=json&nojsoncallback=1&api_sig=fecd019069cc63aac9ff4d8e58dddf95'\r\n\r\n    let [photos,setPhotos]=useState([])\r\n    let [previewPhoto,setPreviewPhoto]=useState(false)\r\n    let [imgLoc,setImgLoc]=useState(\"\")\r\n  let [currText,setCurrText]=useState(\"\")\r\n    useEffect(async ()=>{\r\n       let resp=await fetch(url)\r\n      //  resp.photos.getRecent\r\n       let data=await resp.json();\r\n       let arr=[...data[\"photos\"][\"photo\"]]\r\n      \r\n        setPhotos(arr)\r\n    },[])\r\n    useEffect( async ()=>{\r\n      if(currText!=\"\"){\r\n      let resp=await fetch(url2)\r\n      //  resp.photos.getRecent\r\n       let data=await resp.json();\r\n      \r\n      let filterPhotos=data[\"photos\"][\"photo\"].filter((obj)=>{\r\n        return obj[\"title\"].trim().includes(currText)\r\n      })\r\n      filterPhotos.map((obj)=>{\r\n        console.log(obj[\"title\"]);\r\n      })\r\n      if(filterPhotos.length>0){\r\n        \r\n         setPhotos(filterPhotos)\r\n      }\r\n    }\r\n    else{\r\n      let resp=await fetch(url)\r\n      //  resp.photos.getRecent\r\n       let data=await resp.json();\r\n       let arr=[...data[\"photos\"][\"photo\"]]\r\n      \r\n        setPhotos(arr)\r\n    }\r\n    },[currText])\r\n\r\n   const handleCurrText=(e)=>{\r\n     setCurrText(e.target.value)\r\n   }\r\n  \r\n   const previewImage=(e)=>{\r\n      setImgLoc(e.target.src)\r\n      setPreviewPhoto(!previewPhoto)\r\n   }\r\n\r\n    return (\r\n    \r\n        <div className=\"App\">\r\n               <Navbar handleCurrText={handleCurrText}></Navbar>\r\n        \r\n          <div className=\"imgContainer\">\r\n            {!previewPhoto?photos.map((movieObj)=>{\r\n                let serverId=movieObj[\"server\"]\r\n                let id=movieObj[\"id\"]\r\n                let secret=movieObj[\"secret\"]\r\n                let url=\"https://live.staticflickr.com/\"+serverId+\"/\"+id+\"_\"+secret+\".jpg\"\r\n                  return(\r\n                    <img onClick={previewImage} id={id} src={url}/>\r\n                  )\r\n              }):<ImageLoad src={imgLoc} previewImage={previewImage}></ImageLoad>\r\n            }\r\n          </div>\r\n      \r\n        </div>\r\n      );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}